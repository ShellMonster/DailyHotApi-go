# ğŸš€ DailyHotApi-Go Docker å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

## ä¸€å¥è¯æ€»ç»“

**ä¸€é”®æ„å»ºå¹¶æ¨é€åˆ° Docker Hubï¼Œè®©ä»»ä½•äººéƒ½èƒ½ç›´æ¥ `docker run` ä½¿ç”¨ä½ çš„ Go ç‰ˆ API**

---

## âš¡ 5 åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ æ„å»ºæœ¬åœ°é•œåƒï¼ˆ2 åˆ†é’Ÿï¼‰

```bash
cd DailyHotApi-Go

# æ–¹å¼ A: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x build-and-push.sh
./build-and-push.sh 1.0.0

# æ–¹å¼ B: æ‰‹åŠ¨æ„å»º
docker build -t dailyhot-api-go:1.0.0 .
```

### 2ï¸âƒ£ æœ¬åœ°æµ‹è¯•ï¼ˆ1 åˆ†é’Ÿï¼‰

```bash
# å¯åŠ¨å®¹å™¨
docker run -d -p 6688:6688 --name dailyhot dailyhot-api-go:1.0.0

# æµ‹è¯• API
curl http://localhost:6688/health

# åœæ­¢å®¹å™¨
docker stop dailyhot
```

### 3ï¸âƒ£ æ¨é€åˆ° Docker Hubï¼ˆ2 åˆ†é’Ÿï¼‰

```bash
# ç™»å½• Docker Hubï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
docker login

# ä½¿ç”¨è„šæœ¬ä¸€é”®æ¨é€
./build-and-push.sh 1.0.0 your_docker_username

# æˆ–æ‰‹åŠ¨æ¨é€
docker tag dailyhot-api:1.0.0 your_docker_username/dailyhot-api:1.0.0
docker push your_docker_username/dailyhot-api:1.0.0
```

âœ… **å®Œæˆï¼** é•œåƒå·²å‘å¸ƒåˆ° Docker Hub

---

## ğŸ“¦ å…¶ä»–äººå¦‚ä½•ä½¿ç”¨ä½ çš„é•œåƒ

### æœ€ç®€å•çš„æ–¹å¼

```bash
# ç›´æ¥æ‹‰å–å¹¶è¿è¡Œ
docker pull your_docker_username/dailyhot-api-go:1.0.0
docker run -p 6688:6688 your_docker_username/dailyhot-api-go:1.0.0
```

### ä½¿ç”¨ docker-composeï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cp docker-compose.example.yml docker-compose.yml

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f api

# åœæ­¢æœåŠ¡
docker-compose down
```

---

## ğŸ“‹ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Dockerfile` | é•œåƒå®šä¹‰æ–‡ä»¶ï¼ˆå¤šé˜¶æ®µæ„å»ºï¼Œæœ€ç»ˆé•œåƒ ~50MBï¼Œè¾“å‡º dailyhot-api-goï¼‰ |
| `build-and-push.sh` | ä¸€é”®æ„å»ºå’Œæ¨é€è„šæœ¬ï¼ˆé•œåƒåç§°ï¼šdailyhot-api-goï¼‰ |
| `docker-compose.example.yml` | docker-compose é…ç½®ç¤ºä¾‹ |
| `é•œåƒå‘å¸ƒæŒ‡å—.md` | è¯¦ç»†çš„å‘å¸ƒæŒ‡å— |
| `å¿«é€Ÿä¸Šæ‰‹.md` | æœ¬æ–‡ä»¶ |

---

## ğŸ¯ å¸¸è§åœºæ™¯

### åœºæ™¯ 1: æœ¬åœ°å¼€å‘

```bash
# æ„å»ºæœ¬åœ°é•œåƒ
docker build -t dailyhot-api-go:dev .

# æŒ‚è½½ä»£ç ç›®å½•è¿›è¡Œå¼€å‘
docker run -p 6688:6688 \
  -v $(pwd):/app \
  dailyhot-api-go:dev
```

### åœºæ™¯ 2: å›¢é˜Ÿå…±äº«

```bash
# æ¨é€åˆ° Docker Hub
./build-and-push.sh 1.0.0 your_username

# å›¢é˜Ÿæˆå‘˜å¯ä»¥ç›´æ¥ä½¿ç”¨
docker pull your_username/dailyhot-api-go:1.0.0
docker-compose up -d
```

### åœºæ™¯ 3: ç”Ÿäº§éƒ¨ç½²

```bash
# ä½¿ç”¨ç”Ÿäº§çº§ docker-compose é…ç½®
cp docker-compose.example.yml docker-compose.yml

# å¯ç”¨ Redis ç¼“å­˜ï¼ˆç¼–è¾‘ docker-compose.ymlï¼‰
# å–æ¶ˆæ³¨é‡Š redis æœåŠ¡å’Œç›¸å…³é…ç½®

# å¯åŠ¨
docker-compose up -d

# ç›‘æ§å¥åº·çŠ¶æ€
docker-compose ps
```

### åœºæ™¯ 4: CI/CD è‡ªåŠ¨åŒ–

```bash
# åœ¨ GitHub Actions æˆ– GitLab CI ä¸­ä½¿ç”¨
# .github/workflows/docker.yml

name: Build and Push Docker Image
on:
  push:
    tags:
      - 'v*'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: docker/setup-buildx-action@v1
      - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}
      - uses: docker/build-push-action@v2
        with:
          push: true
          tags: ${{ secrets.DOCKER_USERNAME }}/dailyhot-api:${{ github.ref_name }}
```

---

## ğŸ” æ£€æŸ¥æ¸…å•

æ„å»ºå‰æ£€æŸ¥ï¼š
- âœ… Dockerfile å­˜åœ¨ä¸”æœ‰æ•ˆ
- âœ… `go.mod` å’Œ `go.sum` å­˜åœ¨
- âœ… Docker å·²å®‰è£…å¹¶è¿è¡Œ
- âœ… ï¼ˆæ¨é€æ—¶ï¼‰Docker Hub è´¦æˆ·å·²åˆ›å»º

æ¨é€å‰æ£€æŸ¥ï¼š
- âœ… å·²ç™»å½• Docker Hubï¼š`docker login`
- âœ… ç‰ˆæœ¬å·è®¾ç½®æ­£ç¡®
- âœ… Docker ç”¨æˆ·åæ­£ç¡®

---

## ğŸ“Š é•œåƒä¿¡æ¯

| é¡¹ | å€¼ |
|----|-----|
| **åŸºç¡€é•œåƒ** | alpine:latestï¼ˆè½»é‡çº§ï¼‰ |
| **ç¼–è¯‘ç¯å¢ƒ** | golang:1.21-alpine |
| **æœ€ç»ˆå¤§å°** | ~50MB |
| **æš´éœ²ç«¯å£** | 6688 |
| **å¥åº·æ£€æŸ¥** | âœ… å·²é…ç½® |
| **ç”¨æˆ·æƒé™** | é rootï¼ˆapp:appï¼‰ |
| **é‡å¯ç­–ç•¥** | Unless-stopped |

---

## ğŸ†˜ å¸¸è§é—®é¢˜

**Q: è„šæœ¬æ‰§è¡Œå¤±è´¥ï¼Ÿ**
```bash
# ç¡®ä¿è„šæœ¬å¯æ‰§è¡Œ
chmod +x build-and-push.sh
```

**Q: Docker æœªç™»å½•ï¼Ÿ**
```bash
docker login
# è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ˆæˆ–è®¿é—®ä»¤ç‰Œï¼‰
```

**Q: é•œåƒæ¨é€è¶…æ—¶ï¼Ÿ**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå°è¯•ä½¿ç”¨å›½å†…é•œåƒæº
# ç¼–è¾‘ Dockerfileï¼Œä¿®æ”¹ GOPROXY ä¸º goproxy.cn
```

**Q: å®¹å™¨æ— æ³•å¯åŠ¨ï¼Ÿ**
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
docker logs container_id

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :6688
```

**Q: å¦‚ä½•æ›´æ–°é•œåƒï¼Ÿ**
```bash
# ä¿®æ”¹ä»£ç åï¼Œä»¥æ–°ç‰ˆæœ¬å·é‡æ–°æ„å»º
./build-and-push.sh 1.0.1 your_username

# å…¶ä»–äººæ›´æ–°
docker pull your_username/dailyhot-api-go:1.0.1
```

---

## ğŸ“– æ›´å¤šä¿¡æ¯

- ğŸ“š è¯¦ç»†æŒ‡å—ï¼šæŸ¥çœ‹ `é•œåƒå‘å¸ƒæŒ‡å—.md`
- ğŸ”§ Docker æ–‡æ¡£ï¼šhttps://docs.docker.com/
- ğŸ³ Docker Hubï¼šhttps://hub.docker.com/
- ğŸ“¦ Docker Composeï¼šhttps://docs.docker.com/compose/

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **ç‰ˆæœ¬ç®¡ç†**
   - ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ `v1.0.0`
   - æ¯æ¬¡é‡è¦æ›´æ–°æ¨é€æ–°ç‰ˆæœ¬

2. **æ ‡ç­¾ç®¡ç†**
   - `latest` - æœ€æ–°ç‰ˆæœ¬
   - `v1.0.0` - å…·ä½“ç‰ˆæœ¬
   - `stable` - ç¨³å®šç‰ˆæœ¬

3. **æ–‡æ¡£**
   - åœ¨ Docker Hub ä¸Šæ·»åŠ  README
   - è¯´æ˜å¦‚ä½•ä½¿ç”¨ä½ çš„é•œåƒ
   - åˆ—å‡ºæ”¯æŒçš„ç¯å¢ƒå˜é‡

4. **å®‰å…¨æ€§**
   - ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œï¼ˆå·²é…ç½® âœ…ï¼‰
   - å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ
   - ä½¿ç”¨ Alpine åŸºç¡€é•œåƒå‡å°‘æ”»å‡»é¢

5. **æ€§èƒ½**
   - åˆ©ç”¨ Docker ç¼“å­˜å±‚
   - å¤šé˜¶æ®µæ„å»ºåªåŒ…å«æœ€ç»ˆäº§ç‰©
   - å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„é•œåƒ

---

## ğŸ‰ å®Œæˆå

é•œåƒæ¨é€æˆåŠŸåï¼Œä½ å¯ä»¥ï¼š

1. **åœ¨ Docker Hub ä¸Šåˆ†äº«**
   - é“¾æ¥ï¼š`https://hub.docker.com/r/your_username/dailyhot-api-go`
   - é‚€è¯·å›¢é˜Ÿæˆå‘˜

2. **åˆ›å»º README**
   ```markdown
   # DailyHotApi-Go

   ä¸€ä¸ªå¿«é€Ÿè·å–å„å¹³å°çƒ­æ¦œæ•°æ®çš„ Go API

   ## å¿«é€Ÿå¼€å§‹

   ```bash
   docker pull your_username/dailyhot-api-go:latest
   docker run -p 6688:6688 your_username/dailyhot-api-go:latest
   ```
   ```

3. **å‘å¸ƒåˆ°ç¤¾åŒº**
   - åˆ†äº«åˆ° GitHub
   - å‘å¸ƒåˆ°æŠ€æœ¯ç¤¾åŒº
   - é‚€è¯·ä»–äººè´¡çŒ®

---

ç¥ä½ æ‰“åŒ…é¡ºåˆ©ï¼ğŸš€

